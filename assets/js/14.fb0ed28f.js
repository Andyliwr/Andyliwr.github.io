(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{494:function(s,t,e){"use strict";e.r(t);var a=e(4),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",[s._v("安装"),e("code",[s._v("MySQL")]),s._v("的坑点汇总")])]),s._v(" "),e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),e("p",[s._v("今天早上好气呀！因为项目原因需要在自己电脑上安装一个"),e("code",[s._v("mysql")]),s._v("，去官网下载"),e("code",[s._v("mysql")]),s._v("的安装工具，结果到了最后一步无法配置"),e("code",[s._v("mysql")]),s._v("，就是那种可以选但是没有下一步按钮，这不是为难用户吗？折腾了半天只能删除"),e("code",[s._v("mysql installer")]),s._v("，下载 mysql 源码进行安装。下面简单描述下自己的安装过程：")]),s._v(" "),e("h2",{attrs:{id:"安装-mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysql"}},[s._v("#")]),s._v(" 安装 mysql")]),s._v(" "),e("ol",[e("li",[e("p",[e("strong",[s._v("下载 mysql 源码")]),s._v(" "),e("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载地址"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("下载完成之后将其解压到本地目录")]),s._v("，在"),e("code",[s._v("mysql")]),s._v("根目录下新建一个"),e("code",[s._v("data")]),s._v("和一个"),e("code",[s._v("log")]),s._v("文件夹，此外还需要新建一个"),e("code",[s._v("my.ini")]),s._v("文件，用来配置"),e("code",[s._v("mysql")]),s._v("，写入如下代码：")])])]),s._v(" "),e("div",{staticClass:"language-ini line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[mysqld]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("basedir")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("D:\\mysql")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("datadir")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("D:\\mysql\\data")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[e("p",[s._v("配置"),e("code",[s._v("mysql")]),s._v("的"),e("code",[s._v("bin\\")]),s._v("目录到"),e("strong",[s._v("系统环境变量")]),s._v("，并重启计算机\n"),e("img",{attrs:{src:"http://ouizhbgin.bkt.clouddn.com/blog/2017/10/30/mysql_system_path.png",alt:"系统环境变量"}})])]),s._v(" "),e("li",[e("p",[s._v("以管理员身份运行"),e("strong",[s._v("cmd")]),s._v("，并输入以下代码")])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将mysql安装为系统服务")]),s._v("\nmysqld -install\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql初始化，如果需要不开启用户认证，请将mysqld --initialize替换成mysqld --initialize-insecure")]),s._v("\nmysqld --initialize\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动mysql")]),s._v("\nnet start mysql\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("注意：在启动"),e("code",[s._v("mysql")]),s._v("之前一定要进行初始化，否则就会出现"),e("code",[s._v("‘The mysql service could not be started. The service did not report an error’")])]),s._v(" "),e("div",{staticClass:"language-bat line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("C:\\Windows\\system32>net start mysql\nThe MySQL service is starting.\nThe MySQL service could not be started.\nThe service did not report an error.\nMore help is available by typing NET HELPMSG 3534.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("如果出现这个错误，请先删除 data\\目录下的所有数据，然后重新执行 mysqld --initialize\n"),e("img",{attrs:{src:"http://ouizhbgin.bkt.clouddn.com/blog/2017/10/30/mysql_start.png",alt:"mysql start"}})]),s._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[e("strong",[s._v("最后关于"),e("code",[s._v("mysql")]),s._v("使用"),e("code",[s._v("root")]),s._v("无法登陆，以及如何让本地"),e("code",[s._v("mysql")]),s._v("支持远程访问等这些问题，请翻阅我以前的 csdn 博客")]),s._v("：")])]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"http://blog.csdn.net/u014374031/article/details/54586638",target:"_blank",rel:"noopener noreferrer"}},[s._v("启动 mysql 出现服务无法启动，服务没有报告任何错误"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"http://blog.csdn.net/u014374031/article/details/51134794",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 忘记密码怎么办？"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"http://blog.csdn.net/u014374031/article/details/49253135",target:"_blank",rel:"noopener noreferrer"}},[s._v("教你怎么在"),e("code",[s._v("windows server 2008")]),s._v("的服务器上搭建 mysql 数据库"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"http://blog.csdn.net/u014374031/article/details/45484105",target:"_blank",rel:"noopener noreferrer"}},[s._v("MYSQL 授权管理"),e("OutboundLink")],1)])]),s._v(" "),e("p",[s._v("注意新版的 mysql 已经将 password 从 user 表中移除了，修改密码请使用以下代码")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("use mysql\nupdate user "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("authentication_string")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PASSWORD"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" where "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"史上最坑集合"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#史上最坑集合"}},[s._v("#")]),s._v(" 史上最坑集合")]),s._v(" "),e("p",[e("strong",[s._v("1、The mysql service on Local computer started and then stopped")]),s._v("\n由于修改 mysql 编码很频繁，导致"),e("code",[s._v("mysql")]),s._v("一直重启又关闭，最后一次重启时竟然不干了，直接报"),e("code",[s._v("The mysql service on Local computer started and then stopped")]),s._v("，我又开了漫天盖地的百度，"),e("code",[s._v("google")]),s._v("，可是愣是没找到一种解决方案（重启电脑都试过两次了）。于是开始试着去读 mysql 的错误日志，发现自己在修改编码的时候在 my.ini 文件的[mysqld]下面加入了"),e("code",[s._v("character_set_database=utf8")]),s._v("，但是"),e("code",[s._v("mysql")]),s._v("并不能识别这个配置。于是我将这一行配置删除掉。并且在注册表删除记录---"),e("code",[s._v("HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\MySQL")]),s._v("。重启"),e("code",[s._v("mysql")]),s._v("，这次报了今天早上遇到的错误"),e("code",[s._v("“The mysql service could not be started. The service did not report an error”")]),s._v("，于是只能删除 data\\目录下的所有数据，使用"),e("code",[s._v("mysqld --initialize-insecure")]),s._v("重新初始化一遍，最后才启动成功，我还得重新创建"),e("code",[s._v("root")]),s._v("用户。真心别坑我啊，难受>_<")]),s._v(" "),e("p",[e("strong",[s._v("2. windows mysql 不支持中文")]),s._v("\n修改"),e("code",[s._v("my.ini")]),s._v("配置文件")]),s._v(" "),e("div",{staticClass:"language-conf line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[mysqld]\nbasedir=D:\\mysql\ndatadir=D:\\mysql\\data\ncharacter_set_server=utf8\n\n[client]\ndefault-character-set=utf8\n\n[mysql]\ndefault-character-set=utf8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("最后删除"),e("code",[s._v("mysql")]),s._v("下的 data\\目录从头到尾再来一遍吧，因为配置虽然改了，但是原来那些创建的表的编码还没有被改变，插入中文还是会出问题。尝试过网上说的直接进入"),e("code",[s._v("mysql")]),s._v("命令行改编码，但是没啥用啊，改了之后推出再进去还是原来的编码。也可能是我改的时候出了啥问题，作为一种方法吧，不行的时候可以试试。")]),s._v(" "),e("div",{staticClass:"language-conf line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("use mysql;\nshow variables like'%char%';\nset character_set_database=utf8;\nset character_set_server=utf8;\nset character_set_client=gbk;\nset character_set_connection=gbk;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("strong",[s._v("3、分组查询错误")]),s._v("---"),e("code",[s._v("this is incompatible with sql_mode=only_full_group_by")])]),s._v(" "),e("p",[s._v("在 mysql 命令行模式下输入一下代码：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("SET GLOBAL "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sql_mode")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT REPLACE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("@@sql_mode,"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ONLY_FULL_GROUP_BY'")]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("不行的话就执行这句：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" @@sql_mode "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("最终使用"),e("code",[s._v("select @@sql_mode")]),s._v("查看取得的值中是否还有"),e("code",[s._v("ONLY_FULL_GROUP_BY")]),s._v("。")])])}),[],!1,null,null,null);t.default=n.exports}}]);